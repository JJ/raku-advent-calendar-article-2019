name: "We ðŸŽ” Raku"
on:
  issue_comment:
    types: [created, edited]

jobs:
  seasonal_greetings:
    runs-on: windows-latest
    steps:
      - name: Install Rakudo Star and zef
        run: |
          cinst rakudostar
          $env:Path = "C:\rakudo\bin;C:\rakudo\share\perl6\site\bin;$env:Path"
          refreshenv
          git clone --verbose https://github.com/ugexe/zef.git
          cd zef
          perl6 -I. bin/zef install .
          cd ..
          Remove-Item -Recurse -Force some_dir
          zef update
          zef upgrade
          zef install Cro::HTTP::Client
      - name: Checkout
        uses: actions/checkout@v2-beta
      - name: Maybe greet
        id: maybe-greet
        env:
          HEY: "Hey you!"
          GREETING: "Merry Xmas to you too!"
          BODY: ${{ github.event.issue.body }}
          TOKEN: ${{ secrets.GITHUB_TOKEN}}
          ISSUE: ${{ github.event.issue.number }}
        run: |
          perl6 utils\respond-comment.p6

